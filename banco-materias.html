<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banco Matéria-Prima</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">
  <nav class="navbar fixed-top bg-black">
    <div class="container-fluid">
      <a class="navbar-brand text-danger fs-4" href="dashboard.html">Injetoras PRO</a>
    </div>
  </nav>

  <div class="container mt-5 pt-5">
    <h1 class="text-center mb-5">Banco de Dados - Matéria-Prima</h1>
    <div id="lista" class="row g-4"></div>
  </div>

  <script>
    if(!sessionStorage.getItem('logado')) location.href='index.html';
    const mp = JSON.parse(localStorage.getItem('materias')||'[]');
    const lista = document.getElementById('lista');
    let total = 0;
    mp.forEach(m=>{
      total += m.estoque||0;
      lista.innerHTML += `
        <div class="col-md-4">
          <div class="card bg-secondary text-white">
            ${m.foto?`<img src="${m.foto}" class="card-img-top" style="height:200px;object-fit:cover">`:''}
            <div class="p-4">
              <h4>${m.nome}</h4>
              <p>Tipo: ${m.tipo}</p>
              <p class="fs-3 text-success">${(m.estoque||0).toFixed(1)} kg</p>
            </div>
          </div>
        </div>`;
    });
    lista.insertAdjacentHTML('beforebegin',`<h2 class="text-center text-warning">Total em Estoque: ${total.toFixed(1)} kg</h2>`);
  </script>
</body>
</html>
